@using WordSearch.Web.Services
@inject HttpClient Http
@inject PuzzleService PuzzleService

<Tooltip Title="Load Example"
         Description="Choose from pre-loaded example puzzles to see how the solver works."
         GuideLink="guide/getting-started.html#select-an-example"
         Position="bottom">
    <select class="example-select" @onchange="HandleExampleSelected" value="">
        <option value="">Examples...</option>
        @foreach (var example in ExampleFiles)
        {
            <option value="@example.Path">@example.Name</option>
        }
    </select>
</Tooltip>

@code {
    private static readonly List<(string Name, string Path)> ExampleFiles = new()
    {
        ("Ai", "assets/Ai.txt"),
        ("GitHub", "assets/GitHub.txt"),
        ("Enlighten", "assets/Enlighten.txt"),
        ("ABC", "assets/ABC.txt"),
        ("Numbers", "assets/Numbers.txt"),
        ("Hello", "assets/Hello.txt")
    };

    private async Task HandleExampleSelected(ChangeEventArgs e)
    {
        var path = e.Value?.ToString();
        if (string.IsNullOrEmpty(path))
            return;

        try
        {
            var content = await Http.GetStringAsync(path);
            PuzzleService.LoadPuzzle(content);
        }
        catch (Exception ex)
        {
            Console.WriteLine($"Error loading example: {ex.Message}");
        }
    }
}
